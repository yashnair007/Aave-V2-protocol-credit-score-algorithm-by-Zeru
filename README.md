# Aave-V2-protocol-credit-score-algorithm-by-Zeru

### Your Challenge

You are provided with sample 100K raw, transaction-level data from the Aave V2 protocol. Each record corresponds to a wallet interacting with the protocol through actions such as `deposit`, `borrow`, `repay`, `redeemunderlying`, and `liquidationcall`.

Your task is to develop a robust machine learning model that assigns a **credit score between 0 and 1000** to each wallet, based solely on historical transaction behavior. Higher scores indicate reliable and responsible usage; lower scores reflect risky, bot-like, or exploitative behavior.

Decide which features to engineer from DeFi transaction data
Implement a one-step script that generates wallet scores from a json file which contains the a small sample of user-transactions.


This project builds a **credit scoring model** for decentralized finance (DeFi) wallets using historical on-chain transaction data. Inspired by traditional credit scoring systems, it evaluates wallet behavior on protocols like Aave V2 to produce a trust score between **0 and 1000**.

---

## üìå Project Overview

The goal is to assess the financial reliability of DeFi wallets by analyzing their transaction history. The workflow includes data preprocessing, feature engineering, heuristic scoring, and machine learning-based credit score prediction using **XGBoost**.

---

## üîç Dataset Description

The input dataset is a JSON file containing transaction records. Each entry includes:

- `userWallet`: Wallet address
- `action`: Type of action (e.g., `deposit`, `borrow`, `repay`, etc.)
- `actionData`: Details like `amount`, `assetPriceUSD`, and `assetSymbol`
- `timestamp`: UNIX time of the transaction

---

## ‚öôÔ∏è How It Works

### 1. Data Exploration

- Load and parse JSON transaction records.
- Count transactions by type.
- Display sample transactions for each unique action.

### 2. Feature Engineering

A feature-rich dataset is generated by computing:

- **Transaction Features**
  - `amount_usd`: USD value of each transaction
  - `num_deposits`, `num_borrows`, `num_repays`, etc.

- **Aggregated Wallet Behavior**
  - `total_deposit_usd`, `total_borrow_usd`, `total_repay_usd`
  - `wallet_age_days`: Active lifespan of wallet
  - `tx_count`: Total transaction count
  - `tx_frequency`: Transactions per day
  - `unique_assets`: Number of unique assets interacted with

- **Behavioral Ratios**
  - `repay_to_borrow_ratio`
  - `borrow_to_deposit_ratio`
  - `liquidation_ratio`

### 3. Heuristic Scoring

A custom scoring function generates a proxy target (`credit score`) using weighted behavioral signals:

- ‚úÖ High repayment behavior
- üü∞ Balanced borrow-deposit ratio
- üîÅ Transaction frequency
- ‚è≥ Wallet longevity
- ‚ùå Penalty for high liquidation ratio

### 4. ML-Based Scoring

- An **XGBoost Regressor** is trained to learn the heuristic scoring pattern.
- Model is evaluated using:
  - MSE, RMSE, MAE
  - R¬≤ Score
- Predictions are scaled to a **0‚Äì1000** credit score range using `MinMaxScaler`.

### 5. Output

- A CSV file with wallet credit scores is saved.
- A histogram plot visualizes the distribution of credit scores.

---

## üìä Features Used for Scoring

| Feature | Description |
|--------|-------------|
| `total_deposit_usd` | Total USD value deposited |
| `total_borrow_usd` | Total USD value borrowed |
| `total_repay_usd` | Total USD value repaid |
| `repay_to_borrow_ratio` | Fraction of repaid to borrowed amount |
| `borrow_to_deposit_ratio` | Borrow amount relative to deposits |
| `num_liquidations` | Count of liquidation events |
| `liquidation_ratio` | Liquidation per transaction |
| `tx_count` | Total number of transactions |
| `tx_frequency` | Transactions per day |
| `wallet_age_days` | Wallet activity duration in days |
| `unique_assets` | Distinct asset types used |

---

## üéØ Use Cases

- **Risk assessment** for decentralized lending protocols
- **Reputation scoring** for wallets in DeFi ecosystems
- **Sybil filtering** for airdrops and rewards
- **Credit delegation** in undercollateralized lending

---

## üõ† Tech Stack

- **Python**
- **Pandas**, **NumPy** for data processing
- **XGBoost** for ML modeling
- **scikit-learn** for evaluation
- **Matplotlib** for score visualization

---
